import { Migration, DbMutable } from "@oh/utils";

export default {
  id: "9999-test",
  description: `testing`,
  up: async (db: DbMutable) => {
    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////

    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////
    setTimeout(async () => {
      const migrations = await db.get(["__migrations"]);
      await db.set(["__migrations"], {
        ...migrations,
        index: migrations.index - 1,
        list: migrations.list.filter((id) => id !== "9999-test"),
      });
    }, 500);
  },
  down: async (db: DbMutable) => {},
} as Migration;
